<div class="how">
    <link href="/css/how.css" rel="stylesheet">
    <div class="container mt-5 mt-lg-6 px-3">
        <div class="row">
            <div class="col-12 col-lg-3 mb-5">
                <img class="d-block w-100 pe-4 {howImageVisible}" src="/assets/images/how.svg" />
                <div class="index sticky-top">

                </div>
            </div>
            <div class="col-12 col-lg-9">
                <div>
                    <div onclick="controller.toggleHowToStart" class="d-flex justify-content-between mb-2"
                        role="button">
                        <h3 class="title h3 ">
                            如何開始使用 ItemHub
                        </h3>
                        <img class="arrow {expandedHowToStartArrowVisible}" src="/assets/images/icon-down-arrow.svg" />
                    </div>
                    <hr class="border-white opacity-100" />
                    <div class="how-to-start content {expandedHowToStartVisible}">
                        <div>
                            <h4 class="text-green h4 py-3">新增裝置及要使用的 PIN </h4>
                            <div class="mb-45">
                                <h5 class="fw-bold py-2">進入裝置列表頁</h5>
                                <div>
                                    進入裝置列表頁，點選新增裝置。
                                </div>
                                <img class="w-100 mt-4" src="/assets/images/how/howtouse-1-1.jpeg" />
                            </div>
                            <div class="mb-45">
                                <h5 class="fw-bold py-2">新增裝置</h5>
                                <div>
                                    輸入裝置名稱、選擇裝置類型，完成新增裝置。
                                </div>
                                <div class="">PS:目前提供 3 種裝置類型，後續會再新增其他裝置類型。</div>
                                <img class="w-100 mt-4" src="/assets/images/how/howtouse-1-2.jpeg" />
                            </div>
                            <div class="mb-45">
                                <h5 class="fw-bold py-2">選擇要使用的 PIN</h5>
                                <div>
                                    新增裝置後，選擇要使用的 PIN 及 PIN 對應的功能，如: D3 為開關 D7 為感應器。
                                </div>
                                <img class="w-100 mt-4" src="/assets/images/how/howtouse-1-3.jpeg" />
                            </div>
                        </div>
                        <div>
                            <h4 class="text-green h4 py-3">下載程式碼並燒錄至裝置</h4>
                            <div class="mb-45">
                                <h5 class="fw-bold py-2">下載程式碼</h5>
                                <div>
                                    至裝置列表頁或明細頁可下載程式碼，系統會自動生成裝置對應的程式碼。
                                </div>
                                <img class="w-100 mt-4" src="/assets/images/how/howtouse-2-1.jpeg" />
                            </div>
                            <div class="mb-45">
                                <h5 class="fw-bold py-2">將程式碼燒錄至裝置</h5>
                                <div>
                                    下載程式碼後，開啟副檔名為 .ino 的檔案，其中 {SSID} 請改成你所使用的 wifi 帳號， {WIFI_PASSWORD} 請改成 wifi
                                    密碼，如: wifi 帳密為 home / testing，則: char ssid[] = "home"; char pass[] =
                                    "testing"，修改 wifi 帳密後存檔並將所有檔案燒錄至裝置內。
                                </div>
                                <img class="w-100 mt-4" src="/assets/images/how/howtouse-2-2.jpeg" />
                            </div>
                            <div class="mb-45">
                                <h5 class="fw-bold py-2">確認裝置的連線狀態</h5>
                                <div>
                                    完成程式碼的燒錄後，在裝置列表或明細頁即可看到裝置的狀態會切換成上線狀態即代表連線成功。
                                </div>
                                <img class="w-100 mt-4" src="/assets/images/how/howtouse-2-3.jpeg" />
                            </div>
                        </div>
                        <div>
                            <h4 class="text-green h4 py-3">查看裝置狀態並設定觸發條件</h4>
                            <div class="mb-45">
                                <h5 class="fw-bold py-2">查看裝置即時狀態</h5>
                                <div>
                                    裝置連線成功後，可於裝置列表頁或明細頁即時的切換裝置開關並查看感應器回傳的資料。
                                </div>
                                <img class="w-100 mt-4" src="/assets/images/how/howtouse-3-1.jpeg" />
                            </div>
                            <div class="mb-45">
                                <h5 class="fw-bold py-2">設定自動化觸發條件</h5>
                                <div>
                                    於新增觸發頁填入名稱、觸發的條件與 PIN 操作設定<br />
                                    範例：<br />
                                    設定當濕度大於等於 65 執行開啟抽風扇<br />
                                </div>
                                <img class="w-100 mt-4" src="/assets/images/how/howtouse-3-2.jpeg" />
                            </div>
                        </div>
                        <div class="mb-7">
                            <a onclick="controller.sendBasicGaEvent" href="/auth/verify-email/"
                                class="btn btn-md bg-white text-blue rounded-pill py-2 px-4 text-nowrap link">立即註冊使用</a>
                        </div>
                    </div>
                </div>
                <div>
                    <div onclick="controller.toggleHowToBindSmartHome" class="d-flex justify-content-between mb-2 mt-5"
                        role="button">
                        <div class="title h3 ">
                            如何用 ItemHub 串接 Google
                            Nest
                        </div>
                        <img class="arrow {expandedHowToBindGoogleSmartHomeArrowVisible}"
                            src="/assets/images/icon-down-arrow.svg" />
                    </div>
                    <hr class="border-white opacity-100 bg-opacity-0" />
                    <div class="how-to-integerate-google-nest content {expandedHowToBindGoogleSmartHomeVisible}">
                        <div class="pt-2">
                            <h4 class="text-green h4 py-3">建立 oAuthClient</h4>
                            <p>
                                <a target="_blank" href="/dashboard/oauth-clients/create">建立 oAuthClient</a> 提供一組帳號密碼給
                                Google Nest 作為身份認證，避免任何人都可以透過特定的網址修改你的裝置狀態
                                <br />
                                (註: 新增
                                oAuthClient 後，因 server 不會儲存
                                Client Secret 明碼，因此請立即記下 Client Secret)
                                <img class="w-100 mt-1"
                                    src="/assets/images/how/integrate-google-nest/how-to-integrate-google-nest-create-oauth-client.jpg" />
                            </p>
                        </div>
                        <div class="pt-2">
                            <h4 class="text-green h4 py-3">Google Actions Console</h4>
                            <div>
                                <h5 class="fw-bold py-2">
                                    建立 Google Actions Project
                                </h5>
                                <p class="mb-4">
                                    至
                                    <a href="https://console.actions.google.com/" target="_blank">Google Actions
                                        Console</a>
                                    點擊 New project 建立新的專案
                                    <img class="w-100 mt-1"
                                        src="/assets/images/how/integrate-google-nest/how-to-integrate-google-nest-create-google-actions-project.jpg" />
                                </p>
                                <p class="mb-4">
                                    接著輸入 專案名稱，選擇語言和地區
                                    <img class="w-100 mt-1"
                                        src="/assets/images/how/integrate-google-nest/how-to-integrate-google-nest-project-setup-basic-infomation.jpg" />
                                </p>
                                <p class="mb-4">
                                    選擇專案類型為 Smart Home，點擊 Start Build 建立專案
                                    <img class="w-100 mt-1"
                                        src="/assets/images/how/integrate-google-nest/how-to-integrate-google-nest-choose-project-type.jpg" />
                                </p>
                            </div>
                            <div class="mb-45">
                                <h5 class="fw-bold py-2">設定</h5>
                                <p>
                                    先切到 Develop -> Invocation，選擇語言和 Google Smart Home 的顯示名稱
                                    <img class="w-100 mt-1"
                                        src="/assets/images/how/integrate-google-nest/how-to-integrate-google-nest-setup-name.jpg" />
                                </p>
                                <p>
                                    切到 Develop -> Actions，其中 Fulfillment URL 欄位，填入
                                    https://itemhub.io/api/v1/google-smart-home，讓 Google
                                    Nest 把使用者下的指令傳遞到 ItemHub
                                    <img class="w-100 mt-1"
                                        src="/assets/images/how/integrate-google-nest/how-to-integrate-google-nest-setup-fulfillment-url.jpg" />
                                </p>

                                <p>
                                    切到 Develop -> Account Linking: 輸入 ItemHub 產生的 oAuthClient 資料
                                    <ul class="ps-3">
                                        <li>Client ID 填入於 ItemHub oAuthClient 上產生的 Client ID</li>
                                        <li>Client Secret 填入於 ItemHub oAuthClient 上產生的 Client Secret</li>
                                        <li>Authorization URL 填入 https://itemhub.io/api/v1/oauth</li>
                                        <li>Token URL 填入 https://itemhub.io/api/v1/oauth/token</li>
                                    </ul>
                                    <img class="w-100 mt-1"
                                        src="/assets/images/how/integrate-google-nest/how-to-integrate-google-nest-oauth-binding.jpg" />
                                </p>
                            </div>
                            <div class="mb-45">
                                <h5 class="fw-bold py-2">取得 Project Id</h5>
                                <p>
                                    於 Project settings 內複製 Project Id 的值
                                    <img class="w-100 mt-1"
                                        src="/assets/images/how/integrate-google-nest/how-to-integrate-google-nest-get-project-id.jpg" />
                                </p>
                            </div>
                        </div>
                        <div>
                            <h4 class="text-green h4 py-3">新增授權重導網址</h4>
                            <div class="mb-45">
                                <p>
                                    於 Redirect Uris 輸入 https://oauth-redirect.googleusercontent.com/r/{projectId}，其中
                                    {projectId} 需取代成
                                    Google Actions Console 內的對應的 Project Id 的值，如: Project Id 為 testing，則輸入:
                                    https://oauth-redirect.googleusercontent.com/r/testing，儲存後即完成串接 Google
                                    Smart Home。
                                    <img class="w-100 mt-1"
                                        src="/assets/images/how/integrate-google-nest/how-to-integrate-google-nest-add-new-oauth-client-redirect-url.jpg" />
                                </p>
                            </div>
                        </div>
                        <div class="mb-7">
                            <a href="/auth/verify-email/"
                                class="btn btn-md bg-white text-blue rounded-pill py-2 px-4 text-nowrap link"
                                onclick="controller.sendGoogleHomeGaEvent">立即註冊使用</a>
                        </div>
                    </div>
                </div>
                <div class="child-router"></div>
            </div>
        </div>
    </div>
</div>
